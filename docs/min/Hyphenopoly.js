/**
 * @license Hyphenopoly 4.2.1 - client side hyphenation for webbrowsers
 * ©2020  Mathias Nater, Güttingen (mathiasnater at gmail dot com)
 * https://github.com/mnater/Hyphenopoly
 *
 * Released under the MIT license
 * http://mnater.github.io/Hyphenopoly/LICENSE
 */
(e=>{"use strict";function t(){return Object.create(null)}const n=(e,t)=>({configurable:(4&t)>0,enumerable:(2&t)>0,writable:(1&t)>0,value:e});(e=>{const o=Object.create(null,{defaultLanguage:n("en-us",2),dontHyphenate:n((()=>{const e=t();return"abbr,acronym,audio,br,button,code,img,input,kbd,label,math,option,pre,samp,script,style,sub,sup,svg,textarea,var,video".split(",").forEach(t=>{e[t]=!0}),e})(),2),dontHyphenateClass:n("donthyphenate",2),exceptions:n(t(),2),keepAlive:n(!0,2),normalize:n(!1,2),safeCopy:n(!0,2),timeout:n(1e3,2)}),a=Object.create(o),r=Object.create(null,{compound:n("hyphen",2),hyphen:n("­",2),leftmin:n(0,2),leftminPerLang:n(0,2),minWordLength:n(6,2),mixedCase:n(!0,2),orphanControl:n(1,2),rightmin:n(0,2),rightminPerLang:n(0,2)});Object.keys(e.setup).forEach(l=>{if("selectors"===l){const o=Object.keys(e.setup.selectors);Object.defineProperty(a,"selectors",n(o,2)),o.forEach(o=>{const l=t();Object.keys(e.setup.selectors[o]).forEach(t=>{l[t]=n(e.setup.selectors[o][t],2)}),Object.defineProperty(a,o,n(Object.create(r,l),2))})}else if("dontHyphenate"===l){const r=t();Object.keys(e.setup.dontHyphenate).forEach(t=>{r[t]=n(e.setup.dontHyphenate[t],2)}),Object.defineProperty(a,l,n(Object.create(o.dontHyphenate,r),3))}else Object.defineProperty(a,l,n(e.setup[l],3))}),e.c=a})(Hyphenopoly),(t=>{t.events=new Map;const n=new Set(["afterElementHyphenation","beforeElementHyphenation","engineReady","error","hyphenopolyEnd","hyphenopolyStart"]);var o,a;t.events.set("error",t.defProm()),t.events.get("error").then(e=>{e.runDefault=!0,e.preventDefault=()=>{e.runDefault=!1}}),t.handleEvent&&(o=t.handleEvent,a=e=>{n.has(e)?(t.events.has(e)||t.events.set(e,t.defProm()),t.events.get(e).then(n=>{t.handleEvent[e](n)})):"tearDown"!==e&&"polyfill"!==e&&t.events.get("error").resolve({msg:`unknown Event "${e}" discarded`})},Object.keys(o).forEach(a)),t.events.get("error").then(t=>{t.runDefault&&e.console.warn(t.msg)})})(Hyphenopoly),(o=>{const a=o.c;let r=null;function l(e){o.events.delete(e),o.events.set(e,o.defProm()),o.events.get(e).then(t=>{o.handleEvent[e](t)})}function s(e,t){try{return e.getAttribute("lang")?e.getAttribute("lang").toLowerCase():"html"===e.tagName.toLowerCase()?t?r:null:s(e.parentNode,t)}catch(e){return null}}function c(t=null,n=null){const r=function(){const e=new Map,t=[0];return{add:function(n,o,a){const r={element:n,selector:a};return e.has(o)||e.set(o,[]),e.get(o).push(r),t[0]+=1,r},counter:t,each:function(t){e.forEach((e,n)=>{t(n,e)})},list:e,rem:function(n){let r=0;e.has(n)&&(r=e.get(n).length,e.delete(n),t[0]-=r,0===t[0]&&(o.events.has("hyphenopolyEnd")&&o.events.get("hyphenopolyEnd").resolve("hyphenopolyEnd"),a.keepAlive||(window.Hyphenopoly=null)))}}}(),l=(()=>{let e="."+a.dontHyphenateClass,t=null;for(t in a.dontHyphenate)a.dontHyphenate[t]&&(e+=","+t);return e})(),c=a.selectors.join(",")+","+l;function h(t,n,l,i=!1){const p=function(e,t){return e.lang&&"string"==typeof e.lang?e.lang.toLowerCase():t&&""!==t?t.toLowerCase():s(e,!0)}(t,n);"H9Y"===o.cf.langs[p]?(r.add(t,p,l),!i&&a.safeCopy&&function(t){t.addEventListener("copy",t=>{t.preventDefault();const n=e.getSelection(),o=n.getRangeAt(0).cloneContents(),a=document.createElement("div");a.appendChild(o);const r=a.innerHTML,l=n.toString(),s=/­/g;t.clipboardData.setData("text/plain",l.replace(s,"")),t.clipboardData.setData("text/html",r.replace(s,""))},!0)}(t)):o.cf.langs[p]||o.events.get("error").resolve({msg:`Element with '${p}' found, but '${p}.hpb' not loaded. Check language tags!`}),t.childNodes.forEach(e=>{1!==e.nodeType||function(e,t){return e.matches||(e.matches=e.msMatchesSelector||e.webkitMatchesSelector),e.matches(t)}(e,c)||h(e,p,l,!0)})}return null===t?a.selectors.forEach(t=>{e.document.querySelectorAll(t).forEach(e=>{h(e,s(e,!0),t,!1)})}):h(t,s(t,!0),n,!0),r}o.events.has("hyphenopolyStart")&&o.events.get("hyphenopolyStart").resolve("hyphenopolyStart");const h=new Map,i=new Map;function p(e,t,n){const r=o.languages.get(e),s=a[t],c=s.minWordLength,p=e+"-"+t,u=h.has(p)?h.get(p):function e(t,n,r){const l=a[r],s=l.hyphen;function c(a){let c=t.cache.get(r).get(a);var h;return c||(t.exc.has(a)?c=t.exc.get(a).replace(/-/g,l.hyphen):!l.mixedCase&&(h=a,Array.prototype.map.call(h,e=>e===e.toLowerCase()).some((e,t,n)=>e!==n[0]))?c=a:-1===a.indexOf("-")?a.length>61?(o.events.get("error").resolve({msg:"found word longer than 61 characters"}),c=a):c=t.hyphenate(a,s.charCodeAt(0),l.leftminPerLang[n],l.rightminPerLang[n]):c=function(o){let a=null,s=null;return"auto"===l.compound||"all"===l.compound?(s=e(t,n,r),a=o.split("-").map(e=>e.length>=l.minWordLength?s(e):e),o="auto"===l.compound?a.join("-"):a.join("-​")):o=o.replace("-","-​"),o}(a),t.cache.get(r).set(a,c)),c}return t.cache.set(r,new Map),h.set(n+"-"+r,c),c}(r,e,t),g=i.has(t)?i.get(t):function(e){function t(t,n,o,r){const l=a[e];return 3===l.orphanControl&&" "===n&&(n=" "),n+o.replace(RegExp(l.hyphen,"g"),"")+r}return i.set(e,t),t}(t),d=r.re.get(t);function f(e){let t=null;return t=a.normalize?e.normalize("NFC").replace(d,u):e.replace(d,u),1!==s.orphanControl&&(t=t.replace(/(\u0020*)(\S+)(\s*)$/,g)),t}let m=null;var y;return"string"==typeof n?m=f(n):n instanceof HTMLElement&&(y=n,o.events.has("beforeElementHyphenation")&&(o.events.get("beforeElementHyphenation").resolve({el:y,lang:e}),l("beforeElementHyphenation")),y.childNodes.forEach(e=>{3===e.nodeType&&/\S/.test(e.data)&&e.data.length>=c&&(e.data=f(e.data))}),o.res.get("els").then(e=>{e.counter[0]-=1}),o.events.has("afterElementHyphenation")&&(o.events.get("afterElementHyphenation").resolve({el:y,lang:e}),l("afterElementHyphenation"))),m}function u(t,n){n?n.forEach(e=>{p(t,e.selector,e.element)}):o.events.get("error").resolve({msg:`engine for language '${t}' loaded, but no elements found.`}),o.res.get("els").then(t=>{0===t.counter[0]&&(e.clearTimeout(o.timeOutHandler),0!==a.hide&&o.hide(0,null),o.events.has("hyphenopolyEnd")&&o.events.get("hyphenopolyEnd").resolve("hyphenopolyEnd"),a.keepAlive||(window.Hyphenopoly=null))})}o.createHyphenator=e=>(t,n=".hyphenate")=>t instanceof HTMLElement?(c(t,n).each((e,t)=>{t.forEach(t=>{p(e,t.selector,t.element)})}),null):p(e,n,t),o.unhyphenate=()=>o.res.get("els").then(e=>(e.each((e,t)=>{t.forEach(e=>{const t=e.element.firstChild;t.data=t.data.replace(RegExp(a[e.selector].hyphen,"g"),"")})}),e));const g=(()=>{if(e.TextDecoder){const e=new TextDecoder("utf-16le");return t=>e.decode(t)}return e=>String.fromCharCode.apply(null,e)})();o.res.get("DOM").then(()=>{r=s(e.document.documentElement,!1),r||""===a.defaultLanguage||(r=a.defaultLanguage),o.res.set("els",Promise.resolve(c())),o.res.get("els").then(e=>{e.each((e,t)=>{o.languages&&o.languages.has(e)&&o.languages.get(e).ready&&u(e,t)})})}),o.res.get("he").forEach((e,r)=>{!function(e,r){const l=window.WebAssembly;function s(e){const s=e.instance.exports,c=s.conv(),h={buf:s.mem.buffer,hw:l.Global?s.hwo.value:s.hwo,lm:l.Global?s.lmi.value:s.lmi,rm:l.Global?s.rmi.value:s.rmi,wo:l.Global?s.uwo.value:s.uwo};!function(e,r,l,s,c){l=l.replace(/-/g,"");const h=function(e){return o.languages||(o.languages=new Map),o.languages.has(e)||o.languages.set(e,t()),o.languages.get(e)}(e);h.ready||(h.cache=new Map,a.exceptions.global&&(a.exceptions[e]?a.exceptions[e]+=", "+a.exceptions.global:a.exceptions[e]=a.exceptions.global),a.exceptions[e]?(h.exc=new Map(a.exceptions[e].split(", ").map(e=>[e.replace(/-/g,""),e])),delete a.exceptions[e]):h.exc=new Map,h.re=new Map,h.hyphenate=r,a.selectors.forEach(o=>{const r=a[o];0===r.leftminPerLang&&Object.defineProperty(r,"leftminPerLang",n(t(),2)),0===r.rightminPerLang&&Object.defineProperty(r,"rightminPerLang",n(t(),2)),r.leftminPerLang[e]=Math.max(s,r.leftmin,Number(r.leftminPerLang[e])||0),r.rightminPerLang[e]=Math.max(c,r.rightmin,Number(r.rightminPerLang[e])||0),h.re.set(o,RegExp(`[${l}‌-]{${r.minWordLength},}`,"gi"))}),h.ready=!0,o.hyphenators[e].resolve(o.createHyphenator(e))),o.events.has("engineReady")&&o.events.get("engineReady").resolve(e),Promise.all([h,o.res.get("els")]).then(t=>{u(e,t[1].list.get(e))})}(r,function(e,t){const n=new Uint16Array(e.buf,e.wo,64),o=new Uint16Array(e.buf,e.hw,128);return n[0]=95,(e,a,r,l)=>{let s=0;for(const t of e)s+=1,n[s]=t.charCodeAt(0);return n[s+1]=95,n[s+2]=0,1===t(r,l,a)&&(e=g(o.subarray(1,o[0]+1))),e}}(h,s.hyphenate),g(new Uint16Array(s.mem.buffer,770,c-1)),h.lm,h.rm)}e.w.then(t=>{if(t.ok){let n=t;e.c>1&&(n=t.clone()),l.instantiateStreaming&&"application/wasm"===t.headers.get("Content-Type")?l.instantiateStreaming(n).then(s):n.arrayBuffer().then(e=>{window.WebAssembly.instantiate(e).then(s)})}else o.res.get("els").then(e=>{e.rem(r)}),o.hyphenators[r].catch(e=>{o.events.get("error").resolve({msg:e.msg})}),o.hyphenators[r].reject({msg:`File ${r}.wasm can't be loaded from ${o.paths.patterndir}`})})}(e,r)})})(Hyphenopoly)})(window);